{
  "projectName": "Brain Dump",
  "projectPath": "/Users/salman.rana/code/brain-dump",
  "testingRequirements": [
    "Tests must validate user-facing behavior, not implementation details",
    "Focus on what users actually do - integration tests over unit tests",
    "Don't mock excessively - test real behavior where possible",
    "Coverage metrics are meaningless - user flow coverage is everything"
  ],
  "userStories": [
    {
      "id": "6cd0fd59-89fa-4e21-89e4-7482b38766f7",
      "title": "91 - Create SettingsModal with tabbed navigation",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Modal opens from Settings nav item",
        "4 tabs visible: General, Ralph, Git, Enterprise",
        "Tab switching preserves form state",
        "Uses Modal base component from Sprint 1",
        "Form data saves on submit",
        "Cancel discards changes"
      ],
      "references": [
        "src/components/settings/SettingsModal.tsx"
      ],
      "description": "## Summary\nBuild the main SettingsModal component with 4 tabs: General, Ralph, Git, Enterprise.\n\n## Files to Create\n- `src/components/settings/SettingsModal.tsx`\n\n## Acceptance Criteria\n- [ ] Modal opens from Settings nav item\n- [ ] 4 tabs visible: General, Ralph, Git, Enterprise\n- [ ] Tab switching preserves form state\n- [ ] Uses Modal base component from Sprint 1\n- [ ] Form data saves on submit\n- [ ] Cancel discards changes\n\n## Implementation Hints\n- Use Modal.tsx as base\n- Tab state managed with useState\n- Each tab is a separate component\n- Save button at modal footer\n\n## Tests\n- Visual: Modal renders with all tabs\n- E2E: Tab switching works",
      "priority": "medium",
      "tags": [
        "sprint-6",
        "settings",
        "modal",
        "ui-v2"
      ]
    },
    {
      "id": "d5dd56f8-e9a3-4bd7-b672-40fffbacde47",
      "title": "92 - Create TabNav component for settings",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Tab buttons with icons for each section",
        "Active tab has gradient background",
        "Inactive tabs have ghost styling",
        "Icons: Settings, Robot, Git, Building",
        "Click switches active tab",
        "Keyboard nav between tabs (arrow keys)"
      ],
      "references": [
        "src/components/settings/TabNav.tsx",
        "src/components/settings/TabNav.test.tsx"
      ],
      "description": "## Summary\nBuild the TabNav component for settings modal tab navigation.\n\n## Files to Create\n- `src/components/settings/TabNav.tsx`\n- `src/components/settings/TabNav.test.tsx`\n\n## Acceptance Criteria\n- [ ] Tab buttons with icons for each section\n- [ ] Active tab has gradient background\n- [ ] Inactive tabs have ghost styling\n- [ ] Icons: Settings, Robot, Git, Building\n- [ ] Click switches active tab\n- [ ] Keyboard nav between tabs (arrow keys)\n\n## Implementation Hints\n- lucide-react icons: Settings, Bot, GitBranch, Building2\n- Props: tabs array, activeTab, onTabChange\n- Use accent gradient for active state\n\n## Tests\n- Unit test: Tab click calls onTabChange\n- Visual: Active/inactive states render correctly",
      "priority": "medium",
      "tags": [
        "sprint-6",
        "settings",
        "component",
        "ui-v2"
      ]
    },
    {
      "id": "cdf9add3-545b-4381-8ca4-d753c2a7249c",
      "title": "93 - Create GeneralTab settings component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Projects directory input with browse button",
        "Terminal emulator dropdown (Ghostty, iTerm2, Terminal, etc.)",
        "Default working method dropdown",
        "Current values loaded from settings API",
        "Changes propagate to parent form state",
        "Validation: directory must exist"
      ],
      "references": [
        "src/components/settings/GeneralTab.tsx"
      ],
      "description": "## Summary\nBuild the General settings tab with projects directory, terminal emulator, and working method options.\n\n## Files to Create\n- `src/components/settings/GeneralTab.tsx`\n\n## Acceptance Criteria\n- [ ] Projects directory input with browse button\n- [ ] Terminal emulator dropdown (Ghostty, iTerm2, Terminal, etc.)\n- [ ] Default working method dropdown\n- [ ] Current values loaded from settings API\n- [ ] Changes propagate to parent form state\n- [ ] Validation: directory must exist\n\n## Implementation Hints\n- Use existing getSettings/updateSettings API\n- Directory browser: input + button that opens file picker\n- Terminal options based on detected OS\n\n## Tests\n- E2E: Change terminal, verify saved",
      "priority": "medium",
      "tags": [
        "sprint-6",
        "settings",
        "general",
        "ui-v2"
      ]
    },
    {
      "id": "82d40cff-30a0-44a1-b020-d1d016554290",
      "title": "94 - Create RalphTab settings component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Docker status indicator (connected/disconnected)",
        "Sandbox mode toggle",
        "Session timeout dropdown (30min, 1hr, 2hr, unlimited)",
        "Runtime environment dropdown (Native, Docker)",
        "Verify Docker connection button",
        "Shows current Ralph session if active"
      ],
      "references": [
        "src/components/settings/RalphTab.tsx"
      ],
      "description": "## Summary\nBuild the Ralph settings tab with Docker status, sandbox toggle, timeout, and runtime options.\n\n## Files to Create\n- `src/components/settings/RalphTab.tsx`\n\n## Acceptance Criteria\n- [ ] Docker status indicator (connected/disconnected)\n- [ ] Sandbox mode toggle\n- [ ] Session timeout dropdown (30min, 1hr, 2hr, unlimited)\n- [ ] Runtime environment dropdown (Native, Docker)\n- [ ] Verify Docker connection button\n- [ ] Shows current Ralph session if active\n\n## Implementation Hints\n- Docker status from services API\n- Sandbox toggle uses Toggle component\n- Show warning when sandbox disabled\n\n## Tests\n- E2E: Toggle sandbox, verify saved",
      "priority": "medium",
      "tags": [
        "sprint-6",
        "settings",
        "ralph",
        "ui-v2"
      ]
    },
    {
      "id": "898b1b12-60f2-4287-8d96-cf1c6333beee",
      "title": "95 - Create GitTab settings component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Auto-create draft PR toggle",
        "Default target branch input (default: main)",
        "Branch naming pattern dropdown (feature/, fix/, custom)",
        "Custom pattern input (if custom selected)",
        "Preview of generated branch name"
      ],
      "references": [
        "src/components/settings/GitTab.tsx"
      ],
      "description": "## Summary\nBuild the Git settings tab with auto-create PR, target branch, and branch naming options.\n\n## Files to Create\n- `src/components/settings/GitTab.tsx`\n\n## Acceptance Criteria\n- [ ] Auto-create draft PR toggle\n- [ ] Default target branch input (default: main)\n- [ ] Branch naming pattern dropdown (feature/, fix/, custom)\n- [ ] Custom pattern input (if custom selected)\n- [ ] Preview of generated branch name\n\n## Implementation Hints\n- Branch naming patterns: \"feature/{ticket-id}-{slug}\", \"fix/{ticket-id}\", custom\n- Show preview: \"feature/abc123-add-dark-mode\"\n\n## Tests\n- E2E: Change branch pattern, verify saved",
      "priority": "medium",
      "tags": [
        "sprint-6",
        "settings",
        "git",
        "ui-v2"
      ]
    },
    {
      "id": "21dbe03e-d9a7-40a2-8678-ae1e9fe7b434",
      "title": "96 - Create EnterpriseTab settings component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Enable conversation logging toggle",
        "Retention period slider (7-365 days)",
        "Theme picker with 3 options (Ember, Mint, Solar)",
        "Theme preview swatches",
        "Current theme highlighted",
        "Uses ThemeSwitcher component"
      ],
      "references": [
        "src/components/settings/EnterpriseTab.tsx"
      ],
      "description": "## Summary\nBuild the Enterprise settings tab with conversation logging toggle, retention period, and theme picker.\n\n## Files to Create\n- `src/components/settings/EnterpriseTab.tsx`\n\n## Acceptance Criteria\n- [ ] Enable conversation logging toggle\n- [ ] Retention period slider (7-365 days)\n- [ ] Theme picker with 3 options (Ember, Mint, Solar)\n- [ ] Theme preview swatches\n- [ ] Current theme highlighted\n- [ ] Uses ThemeSwitcher component\n\n## Implementation Hints\n- Reuse ThemeSwitcher from Sprint 1\n- Retention: slider or number input with validation\n- Show logging status indicator\n\n## Tests\n- E2E: Change theme, verify persists\n- E2E: Toggle logging, verify saved",
      "priority": "medium",
      "tags": [
        "sprint-6",
        "settings",
        "enterprise",
        "ui-v2"
      ]
    },
    {
      "id": "9de9a2a6-ce9e-4ca2-ae4a-08d86fb6e236",
      "title": "97 - Create global keyboard shortcuts hook",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "`n` - Opens new ticket modal",
        "`/` - Focus search input",
        "`?` - Opens shortcuts help modal",
        "`Escape` - Close any open modal",
        "Shortcuts disabled when typing in input/textarea",
        "Hook returns current shortcuts for help display"
      ],
      "references": [
        "src/lib/keyboard-shortcuts.ts",
        "src/lib/keyboard-shortcuts.test.ts"
      ],
      "description": "## Summary\nBuild the useKeyboardShortcuts hook for global keyboard navigation.\n\n## Files to Create\n- `src/lib/keyboard-shortcuts.ts`\n- `src/lib/keyboard-shortcuts.test.ts`\n\n## Acceptance Criteria\n- [ ] `n` - Opens new ticket modal\n- [ ] `/` - Focus search input\n- [ ] `?` - Opens shortcuts help modal\n- [ ] `Escape` - Close any open modal\n- [ ] Shortcuts disabled when typing in input/textarea\n- [ ] Hook returns current shortcuts for help display\n\n## Implementation Hints\n- Use useEffect with window keydown listener\n- Check document.activeElement.tagName for input detection\n- Return cleanup function\n\n## Tests\n- Unit test: Shortcuts trigger callbacks\n- Unit test: Disabled in input fields",
      "priority": "medium",
      "tags": [
        "sprint-6",
        "keyboard",
        "accessibility",
        "ui-v2"
      ]
    },
    {
      "id": "e45db2cd-006e-4412-9be3-3b35971bce51",
      "title": "98 - Add keyboard navigation to IconSidebar",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "`1` - Navigate to Dashboard",
        "`2` - Navigate to Board",
        "`3` - Toggle Projects panel",
        "`4` - Open Settings modal",
        "Number keys work globally (not just when sidebar focused)",
        "Visual indicator shows number shortcuts on hover"
      ],
      "references": [
        "src/components/navigation/IconSidebar.tsx"
      ],
      "description": "## Summary\nAdd keyboard shortcuts 1-4 to navigate between sidebar views.\n\n## Files to Modify\n- `src/components/navigation/IconSidebar.tsx`\n\n## Acceptance Criteria\n- [ ] `1` - Navigate to Dashboard\n- [ ] `2` - Navigate to Board\n- [ ] `3` - Toggle Projects panel\n- [ ] `4` - Open Settings modal\n- [ ] Number keys work globally (not just when sidebar focused)\n- [ ] Visual indicator shows number shortcuts on hover\n\n## Implementation Hints\n- Integrate with keyboard-shortcuts.ts\n- Use TanStack Router navigate\n- Add tooltip with shortcut key\n\n## Tests\n- Manual: Press 1-4, verify navigation",
      "priority": "low",
      "tags": [
        "sprint-6",
        "keyboard",
        "navigation",
        "ui-v2"
      ]
    },
    {
      "id": "76e1c65a-c8e3-429b-93e0-624eed12c822",
      "title": "99 - Add keyboard navigation to KanbanBoard",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Arrow keys move focus between tickets",
        "Left/Right moves between columns",
        "Up/Down moves within column",
        "Enter opens focused ticket detail",
        "Focus ring visible on focused card",
        "Tab moves to next card"
      ],
      "references": [
        "src/components/board/KanbanBoard.tsx",
        "src/components/board/TicketCard.tsx"
      ],
      "description": "## Summary\nAdd arrow key navigation and Enter to open ticket on the Kanban board.\n\n## Files to Modify\n- `src/components/board/KanbanBoard.tsx`\n- `src/components/board/TicketCard.tsx`\n\n## Acceptance Criteria\n- [ ] Arrow keys move focus between tickets\n- [ ] Left/Right moves between columns\n- [ ] Up/Down moves within column\n- [ ] Enter opens focused ticket detail\n- [ ] Focus ring visible on focused card\n- [ ] Tab moves to next card\n\n## Implementation Hints\n- Use roving tabindex pattern\n- Track focused card ID in state\n- Use refs array for card elements\n\n## Tests\n- Manual: Navigate board with arrows",
      "priority": "low",
      "tags": [
        "sprint-6",
        "keyboard",
        "kanban",
        "ui-v2"
      ]
    },
    {
      "id": "24cbb8fe-563d-4fe0-82b1-3d0992591b55",
      "title": "100 - Create ShortcutsModal component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Opens with `?` key",
        "Lists all shortcuts in organized sections",
        "Sections: Global, Navigation, Board, Modals",
        "Key displayed in styled kbd element",
        "Description for each shortcut",
        "Close with Escape or click outside"
      ],
      "references": [
        "src/components/ui/ShortcutsModal.tsx"
      ],
      "description": "## Summary\nBuild the keyboard shortcuts help modal showing all available shortcuts.\n\n## Files to Create\n- `src/components/ui/ShortcutsModal.tsx`\n\n## Acceptance Criteria\n- [ ] Opens with `?` key\n- [ ] Lists all shortcuts in organized sections\n- [ ] Sections: Global, Navigation, Board, Modals\n- [ ] Key displayed in styled kbd element\n- [ ] Description for each shortcut\n- [ ] Close with Escape or click outside\n\n## Implementation Hints\n- Use Modal base component\n- Get shortcuts from keyboard-shortcuts.ts\n- Style kbd with monospace and border\n\n## Tests\n- Visual: All shortcuts displayed correctly",
      "priority": "low",
      "tags": [
        "sprint-6",
        "keyboard",
        "modal",
        "ui-v2"
      ]
    },
    {
      "id": "80b25268-15dc-44d8-a9b6-6d1610c7ef9e",
      "title": "101 - Add mobile sidebar with hamburger menu",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Sidebar collapses to hamburger on < 768px",
        "Hamburger button in top-left corner",
        "Click opens slide-out menu",
        "Menu overlays content (z-index 100)",
        "Backdrop click closes menu",
        "Swipe gesture closes menu (optional)",
        "Icons + labels visible in mobile menu"
      ],
      "references": [
        "src/components/navigation/IconSidebar.tsx"
      ],
      "description": "## Summary\nMake the IconSidebar responsive with collapsible hamburger menu on mobile.\n\n## Files to Modify\n- `src/components/navigation/IconSidebar.tsx`\n\n## Acceptance Criteria\n- [ ] Sidebar collapses to hamburger on < 768px\n- [ ] Hamburger button in top-left corner\n- [ ] Click opens slide-out menu\n- [ ] Menu overlays content (z-index 100)\n- [ ] Backdrop click closes menu\n- [ ] Swipe gesture closes menu (optional)\n- [ ] Icons + labels visible in mobile menu\n\n## Implementation Hints\n- Use @media (max-width: 768px) or Tailwind md: breakpoint\n- useState for mobile menu open state\n- AnimatePresence for slide animation\n\n## Tests\n- Visual: Test at 375px width",
      "priority": "medium",
      "tags": [
        "sprint-6",
        "responsive",
        "mobile",
        "ui-v2"
      ]
    },
    {
      "id": "062325ad-7287-4d48-a2ae-d9ac17760d07",
      "title": "102 - Add responsive board with horizontal scroll",
      "passes": false,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Horizontal scroll works on mobile",
        "Columns have minimum width (280px)",
        "Touch scrolling smooth (momentum)",
        "Drag handles larger on touch devices",
        "Column headers sticky during scroll",
        "Scroll snap to columns (optional)"
      ],
      "references": [
        "src/components/board/KanbanBoard.tsx",
        "src/components/board/KanbanColumn.tsx"
      ],
      "description": "## Summary\nMake the Kanban board responsive with horizontal scroll and touch-friendly interactions.\n\n## Files to Modify\n- `src/components/board/KanbanBoard.tsx`\n- `src/components/board/KanbanColumn.tsx`\n\n## Acceptance Criteria\n- [ ] Horizontal scroll works on mobile\n- [ ] Columns have minimum width (280px)\n- [ ] Touch scrolling smooth (momentum)\n- [ ] Drag handles larger on touch devices\n- [ ] Column headers sticky during scroll\n- [ ] Scroll snap to columns (optional)\n\n## Implementation Hints\n- overflow-x: auto with -webkit-overflow-scrolling: touch\n- Use @media (hover: none) for touch detection\n- scroll-snap-type: x mandatory for snap\n\n## Tests\n- Visual: Test on mobile viewport\n- Manual: Touch scroll and drag",
      "priority": "medium",
      "tags": [
        "sprint-6",
        "responsive",
        "kanban",
        "ui-v2"
      ]
    },
    {
      "id": "42b951fe-b4b0-472b-8427-6ca421f01a09",
      "title": "103 - Add responsive full-screen modals on mobile",
      "passes": false,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Modals full-screen on < 640px",
        "Header becomes sticky top bar",
        "Close button in header (X icon)",
        "Form scrollable within modal",
        "Footer sticky at bottom",
        "Keyboard avoidance on iOS"
      ],
      "references": [
        "src/components/ui/Modal.tsx"
      ],
      "description": "## Summary\nMake modals full-screen on mobile devices for better usability.\n\n## Files to Modify\n- `src/components/ui/Modal.tsx`\n\n## Acceptance Criteria\n- [ ] Modals full-screen on < 640px\n- [ ] Header becomes sticky top bar\n- [ ] Close button in header (X icon)\n- [ ] Form scrollable within modal\n- [ ] Footer sticky at bottom\n- [ ] Keyboard avoidance on iOS\n\n## Implementation Hints\n- Use @media (max-width: 640px) for mobile\n- height: 100dvh for dynamic viewport height\n- position: fixed, inset: 0 for full-screen\n\n## Tests\n- Visual: Test modals at 375px width",
      "priority": "medium",
      "tags": [
        "sprint-6",
        "responsive",
        "modal",
        "ui-v2"
      ]
    },
    {
      "id": "4f20d75f-7826-41a9-a4ad-bbf10e5b4012",
      "title": "104 - Add ARIA labels to all interactive elements",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "All buttons have aria-label or visible text",
        "Icon-only buttons have aria-label",
        "Form inputs have associated labels",
        "Modal roles: dialog, aria-modal, aria-labelledby",
        "Live regions for dynamic content (aria-live)",
        "Navigation landmarks (nav, main, aside)"
      ],
      "references": [],
      "description": "## Summary\nAudit and add ARIA labels to all interactive elements for screen reader accessibility.\n\n## Files to Modify\n- All component files (throughout)\n\n## Acceptance Criteria\n- [ ] All buttons have aria-label or visible text\n- [ ] Icon-only buttons have aria-label\n- [ ] Form inputs have associated labels\n- [ ] Modal roles: dialog, aria-modal, aria-labelledby\n- [ ] Live regions for dynamic content (aria-live)\n- [ ] Navigation landmarks (nav, main, aside)\n\n## Implementation Hints\n- Run axe-core audit to find issues\n- aria-label for icon buttons\n- role=\"dialog\" aria-modal=\"true\" for modals\n- aria-live=\"polite\" for toasts\n\n## Tests\n- Axe audit: No critical/serious issues",
      "priority": "high",
      "tags": [
        "sprint-6",
        "accessibility",
        "a11y",
        "ui-v2"
      ]
    },
    {
      "id": "0051e530-bfc3-4bac-b011-cf50c6031a98",
      "title": "105 - Add visible focus indicators with WCAG AA contrast",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Focus ring visible on all interactive elements",
        "Focus ring uses accent color with offset",
        "Contrast ratio ≥ 3:1 against adjacent colors",
        "Focus visible on keyboard nav (not mouse click)",
        "Custom focus styles match theme",
        ":focus-visible used (not :focus)"
      ],
      "references": [
        "src/styles/variables.css"
      ],
      "description": "## Summary\nAdd visible focus rings to all interactive elements meeting WCAG AA contrast requirements.\n\n## Files to Modify\n- `src/styles/variables.css`\n- Various component files\n\n## Acceptance Criteria\n- [ ] Focus ring visible on all interactive elements\n- [ ] Focus ring uses accent color with offset\n- [ ] Contrast ratio ≥ 3:1 against adjacent colors\n- [ ] Focus visible on keyboard nav (not mouse click)\n- [ ] Custom focus styles match theme\n- [ ] :focus-visible used (not :focus)\n\n## Implementation Hints\n- Use :focus-visible for keyboard-only focus\n- outline: 2px solid var(--accent-primary)\n- outline-offset: 2px for spacing\n- Remove default outline, add custom\n\n## Tests\n- Visual: Tab through app, verify focus visible\n- Manual: Contrast check with browser tools",
      "priority": "high",
      "tags": [
        "sprint-6",
        "accessibility",
        "focus",
        "ui-v2"
      ]
    },
    {
      "id": "bfb69644-0c7b-4a12-831c-7a45e25a4644",
      "title": "106 - Add skip-to-content link for keyboard users",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Hidden link at top of page",
        "Visible only when focused (Tab key)",
        "Links to main content area (#main-content)",
        "Styled to be clearly visible when focused",
        "Main content has id=\"main-content\" and tabindex=\"-1\""
      ],
      "references": [
        "src/routes/__root.tsx"
      ],
      "description": "## Summary\nAdd a skip-to-content link that appears on focus for keyboard navigation.\n\n## Files to Modify\n- `src/routes/__root.tsx`\n\n## Acceptance Criteria\n- [ ] Hidden link at top of page\n- [ ] Visible only when focused (Tab key)\n- [ ] Links to main content area (#main-content)\n- [ ] Styled to be clearly visible when focused\n- [ ] Main content has id=\"main-content\" and tabindex=\"-1\"\n\n## Implementation Hints\n- Position: absolute, top: -100px when not focused\n- top: 0 when :focus\n- High z-index to appear above header\n\n## Tests\n- Manual: Press Tab on page load, see skip link",
      "priority": "medium",
      "tags": [
        "sprint-6",
        "accessibility",
        "navigation",
        "ui-v2"
      ]
    },
    {
      "id": "1505fbc2-f78a-41db-91ec-8b5e5c2ceb2b",
      "title": "107 - Add reduced motion support for animations",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Check prefers-reduced-motion media query",
        "Disable transition animations when reduced motion",
        "Keep essential state changes (instant instead of animated)",
        "AI glow pulse disabled in reduced motion",
        "Drag feedback simplified (opacity only)",
        "Modal transitions instant"
      ],
      "references": [
        "src/styles/variables.css"
      ],
      "description": "## Summary\nRespect user's prefers-reduced-motion setting by disabling/reducing animations.\n\n## Files to Modify\n- `src/styles/variables.css`\n- Various component files with animations\n\n## Acceptance Criteria\n- [ ] Check prefers-reduced-motion media query\n- [ ] Disable transition animations when reduced motion\n- [ ] Keep essential state changes (instant instead of animated)\n- [ ] AI glow pulse disabled in reduced motion\n- [ ] Drag feedback simplified (opacity only)\n- [ ] Modal transitions instant\n\n## Implementation Hints\n```css\n@media (prefers-reduced-motion: reduce) {\n  *, *::before, *::after {\n    animation-duration: 0.01ms !important;\n    transition-duration: 0.01ms !important;\n  }\n}\n```\n\n## Tests\n- Manual: Enable reduced motion in OS, verify animations disabled",
      "priority": "medium",
      "tags": [
        "sprint-6",
        "accessibility",
        "animation",
        "ui-v2"
      ]
    }
  ],
  "projectContext": {
    "techStack": [
      "Framework: TanStack Start (React 19 + Vite + Nitro)",
      "Database: SQLite with better-sqlite3, Drizzle ORM",
      "Styling: Tailwind CSS v4",
      "State: TanStack Query for server state",
      "Drag & Drop: @dnd-kit"
    ],
    "dosDonts": [
      {
        "category": "Database Queries",
        "dos": [
          "Use Drizzle ORM: `db.select().from(tickets)`",
          "Use typed schema imports: `import { tickets } from \"../lib/schema\"`",
          "Use `eq()`, `and()`, `sql` from drizzle-orm for conditions",
          "Use transactions for multi-table operations: `db.transaction(() => {...})`",
          "Use `.get()` for single row, `.all()` for multiple"
        ],
        "donts": [
          "Raw SQL strings: `db.run(\"SELECT * FROM tickets\")`",
          "String-based table names",
          "String concatenation for WHERE clauses",
          "Multiple independent queries that should be atomic",
          "Assume query returns what you expect without checking"
        ]
      },
      {
        "category": "React & TanStack Query",
        "dos": [
          "Use `useQuery` with `queryKeys` for data fetching",
          "Use `useMutation` with `onSuccess` for state changes",
          "Invalidate queries after mutations: `queryClient.invalidateQueries({ queryKey: queryKeys.tickets })`",
          "Use centralized `queryKeys` object from `src/lib/hooks.ts`",
          "Create custom hooks in `src/lib/hooks.ts` for reusable query logic"
        ],
        "donts": [
          "`useState` + `useEffect` for fetched data",
          "Direct API calls without proper cache invalidation",
          "Manual cache manipulation or refetch after every change",
          "Hardcoded query key strings throughout components",
          "Duplicate query setup in multiple components"
        ]
      },
      {
        "category": "Server Functions",
        "dos": [
          "Use `createServerFn({ method: \"GET\" })` for reads, `\"POST\"` for writes",
          "Use `.inputValidator()` for type-safe input handling",
          "Return typed data directly: `return db.select().from(tickets).all()`",
          "Use `ensureExists()` for required lookups: `ensureExists(project, \"Project\")`",
          "Import from `@tanstack/react-start` (not `@tanstack/react-start/server`)"
        ],
        "donts": [
          "Mix GET/POST inconsistently",
          "Access raw input without validation",
          "Wrap in unnecessary response objects",
          "Return null and let caller handle missing data",
          "Wrong import path"
        ]
      },
      {
        "category": "MCP Tool Implementation",
        "dos": [
          "Use Zod schemas for input validation: `{ ticketId: z.string() }`",
          "Return structured `{ content: [{ type: \"text\", text: ... }] }` format",
          "Set `isError: true` for error responses",
          "Use `log.info()` / `log.error()` from `../lib/logging.js`",
          "Include helpful error messages: `\"Project not found. Use list_projects to see available.\"`"
        ],
        "donts": [
          "Trust input without validation",
          "Return plain strings",
          "Return error text without the error flag",
          "`console.log` in MCP server code",
          "Generic \"Not found\" errors"
        ]
      },
      {
        "category": "Testing Patterns (Kent C. Dodds)",
        "dos": [
          "Test user behavior: what users see, click, and experience",
          "Integration tests for workflows: test components together",
          "Real database fixtures with actual schema",
          "Tests that fail when user-facing behavior breaks",
          "Ask: \"Does this test catch bugs users would encounter?\""
        ],
        "donts": [
          "Test implementation details, internal state, or private methods",
          "Unit tests for every function",
          "Excessive mocking of internals",
          "Tests that break on refactoring internals",
          "Chase 100% code coverage as a goal"
        ]
      }
    ],
    "verificationSteps": [
      "Run `pnpm type-check` - must pass with no errors",
      "Run `pnpm lint` - must pass with no errors",
      "Run `pnpm test` - all tests must pass",
      "Added tests for new functionality (ONLY tests that verify real user behavior - see Testing Philosophy above)",
      "Used typed error classes (not generic `Error`)",
      "Used Drizzle ORM (not raw SQL) - see DO/DON'T table above",
      "Followed existing patterns from DO/DON'T tables",
      "No hardcoded values that should be configurable",
      "Existing tests still pass",
      "No regressions in related functionality",
      "Updated tests if behavior changed",
      "Did not break backward compatibility (unless explicitly requested)",
      "Manually verified in browser at `localhost:4242`",
      "Checked responsive layout",
      "Verified TanStack Query invalidates and updates correctly",
      "Accessibility: keyboard navigation works, proper ARIA labels",
      "Migration file created via `pnpm db:generate`",
      "Migration tested with `pnpm db:migrate`",
      "Backup tested if schema changed (use `pnpm brain-dump backup` then test restore)",
      "Updated `src/lib/schema.ts` with proper types and constraints",
      "Tested tool via Claude Code integration",
      "Verified error responses are informative (see DO/DON'T table)",
      "Updated tool documentation if interface changed",
      "Added Zod schema for input validation",
      "All acceptance criteria from ticket met",
      "Work summary added via `add_ticket_comment` (for Ralph sessions)",
      "Session completed with appropriate outcome (for Ralph sessions)",
      "Committed with proper message format: `feat(<ticket-id>): <description>`"
    ]
  },
  "generatedAt": "2026-01-21T17:22:10.905Z",
  "epicTitle": "UI v2 Sprint 6: Settings & Polish",
  "epicDescription": "Build settings pages, Ralph configuration UI, keyboard shortcuts help, theme persistence, animations polish, and accessibility improvements."
}

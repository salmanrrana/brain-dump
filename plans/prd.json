{
  "projectName": "Brain Dump",
  "projectPath": "/Users/salman.rana/code/brain-dump",
  "testingRequirements": [
    "Tests must validate user-facing behavior, not implementation details",
    "Focus on what users actually do - integration tests over unit tests",
    "Don't mock excessively - test real behavior where possible",
    "Coverage metrics are meaningless - user flow coverage is everything"
  ],
  "userStories": [
    {
      "id": "dbf5d869-2678-406f-aacd-08ecdf27c71d",
      "title": "26 - Create IconSidebar component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "64px fixed width",
        "Full viewport height",
        "4 nav items: Dashboard, Board, Projects, Settings",
        "Icons from lucide-react",
        "Active item has gradient background + glow",
        "Background uses `--bg-secondary`",
        "All 4 items render",
        "Active item highlighted",
        "Navigation works"
      ],
      "references": [
        "src/components/navigation/IconSidebar.tsx",
        "src/components/navigation/IconSidebar.test.tsx"
      ],
      "description": "Create the 64px icon-based sidebar for main navigation.\n\n**Files to Create:**\n- `src/components/navigation/IconSidebar.tsx`\n- `src/components/navigation/IconSidebar.test.tsx`\n\n**Acceptance Criteria:**\n- [ ] 64px fixed width\n- [ ] Full viewport height\n- [ ] 4 nav items: Dashboard, Board, Projects, Settings\n- [ ] Icons from lucide-react\n- [ ] Active item has gradient background + glow\n- [ ] Background uses `--bg-secondary`\n\n**Nav Items:**\n```tsx\nconst navItems = [\n  { icon: LayoutDashboard, label: 'Dashboard', path: '/dashboard' },\n  { icon: Kanban, label: 'Board', path: '/' },\n  { icon: Folder, label: 'Projects', action: 'openProjectsPanel' },\n  { icon: Settings, label: 'Settings', action: 'openSettings' },\n];\n```\n\n**Tests:**\n- [ ] All 4 items render\n- [ ] Active item highlighted\n- [ ] Navigation works",
      "priority": "high",
      "tags": [
        "navigation",
        "component"
      ]
    },
    {
      "id": "47b6b6f0-dbd7-47ab-8db3-6161b0f2f911",
      "title": "27 - Create NavItem component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Icon centered in square button",
        "Tooltip shows label on hover (appears to right)",
        "Active state: gradient background + glow effect",
        "Hover state: subtle background change",
        "Keyboard accessible (Tab, Enter)",
        "aria-current for active state"
      ],
      "references": [
        "src/components/navigation/NavItem.tsx"
      ],
      "description": "Create individual navigation item component with tooltip.\n\n**Files to Create:**\n- `src/components/navigation/NavItem.tsx`\n\n**Acceptance Criteria:**\n- [ ] Icon centered in square button\n- [ ] Tooltip shows label on hover (appears to right)\n- [ ] Active state: gradient background + glow effect\n- [ ] Hover state: subtle background change\n- [ ] Keyboard accessible (Tab, Enter)\n- [ ] aria-current for active state\n\n**Visual States:**\n```\nDefault:  [ğŸ ]  <- gray icon, transparent bg\nHover:    [ğŸ ]  <- gray icon, hover bg\nActive:   [ğŸ ]  <- white icon, gradient bg, glow\n```\n\n**Tests:** Visual inspection + keyboard nav",
      "priority": "medium",
      "tags": [
        "navigation",
        "component"
      ]
    },
    {
      "id": "aaff7427-23e9-4745-be5d-ae6ea3dfe198",
      "title": "28 - Integrate sidebar with TanStack Router",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Clicks navigate to correct routes",
        "Active state syncs with current route",
        "Uses `<Link>` from TanStack Router",
        "Projects item opens panel (not route)",
        "Settings item opens modal (not route)",
        "Click Dashboard â†’ /dashboard route",
        "Click Board â†’ / route"
      ],
      "references": [
        "src/components/navigation/IconSidebar.tsx"
      ],
      "description": "Wire up sidebar navigation to TanStack Router for route changes.\n\n**Files to Modify:**\n- `src/components/navigation/IconSidebar.tsx`\n\n**Acceptance Criteria:**\n- [ ] Clicks navigate to correct routes\n- [ ] Active state syncs with current route\n- [ ] Uses `<Link>` from TanStack Router\n- [ ] Projects item opens panel (not route)\n- [ ] Settings item opens modal (not route)\n\n**Implementation:**\n```tsx\nimport { Link, useLocation } from '@tanstack/react-router';\n\n// For route items\n<Link to={item.path}>\n  <NavItem active={location.pathname === item.path} />\n</Link>\n\n// For action items (Projects, Settings)\n<button onClick={item.action}>\n  <NavItem />\n</button>\n```\n\n**Tests (E2E):**\n- [ ] Click Dashboard â†’ /dashboard route\n- [ ] Click Board â†’ / route",
      "priority": "high",
      "tags": [
        "navigation",
        "routing"
      ]
    },
    {
      "id": "17787d6d-fb92-4ddf-bcda-83257fa053e0",
      "title": "29 - Create Header component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Full width header at top of content area",
        "Logo/brand area on left",
        "Search bar in center",
        "Status pills on right (Docker, AI)",
        "\"New\" button on far right",
        "Height: 64px",
        "Background: `--bg-secondary`"
      ],
      "references": [
        "src/components/navigation/Header.tsx"
      ],
      "description": "Create the main header bar with logo, search, and status indicators.\n\n**Files to Create:**\n- `src/components/navigation/Header.tsx`\n\n**Acceptance Criteria:**\n- [ ] Full width header at top of content area\n- [ ] Logo/brand area on left\n- [ ] Search bar in center\n- [ ] Status pills on right (Docker, AI)\n- [ ] \"New\" button on far right\n- [ ] Height: 64px\n- [ ] Background: `--bg-secondary`\n\n**Layout:**\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Brain Dump    [ğŸ” Search...     ]    ğŸ³ Running  âš¡ AI   [+]â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Tests:** Visual inspection",
      "priority": "high",
      "tags": [
        "navigation",
        "component"
      ]
    },
    {
      "id": "a00e72ab-95d5-4a53-ba88-e7a6ecb097ef",
      "title": "30 - Create SearchBar with FTS5 integration",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Search input with icon",
        "Debounced search (300ms)",
        "Dropdown shows results as user types",
        "Results show ticket title, project, status",
        "Keyboard navigation (â†‘â†“ arrows, Enter)",
        "Click result navigates to ticket",
        "Empty state: \"No results\"",
        "Uses existing `searchTickets` API",
        "Search returns results",
        "Keyboard navigation works",
        "Click opens ticket"
      ],
      "references": [
        "src/components/navigation/SearchBar.tsx",
        "src/components/navigation/SearchBar.test.tsx"
      ],
      "description": "Create search bar component with dropdown results using existing FTS5 search API.\n\n**Files to Create:**\n- `src/components/navigation/SearchBar.tsx`\n- `src/components/navigation/SearchBar.test.tsx`\n\n**Acceptance Criteria:**\n- [ ] Search input with icon\n- [ ] Debounced search (300ms)\n- [ ] Dropdown shows results as user types\n- [ ] Results show ticket title, project, status\n- [ ] Keyboard navigation (â†‘â†“ arrows, Enter)\n- [ ] Click result navigates to ticket\n- [ ] Empty state: \"No results\"\n- [ ] Uses existing `searchTickets` API\n\n**Interface:**\n```tsx\n// Uses existing API\nconst results = await searchTickets({ query: searchTerm });\n```\n\n**Tests:**\n- [ ] Search returns results\n- [ ] Keyboard navigation works\n- [ ] Click opens ticket",
      "priority": "high",
      "tags": [
        "search",
        "component"
      ]
    },
    {
      "id": "7d945ec4-93a3-43ae-909a-2489ee2d4bf2",
      "title": "31 - Create StatusPill component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Pill shape with icon + text",
        "Docker status: Running (green), Stopped (gray), Error (red)",
        "AI status: Active (pulse animation), Idle (gray)",
        "Hover shows tooltip with details",
        "Polls for status updates (or uses query)"
      ],
      "references": [
        "src/components/navigation/StatusPill.tsx"
      ],
      "description": "Create status indicator pills for Docker and AI activity status.\n\n**Files to Create:**\n- `src/components/navigation/StatusPill.tsx`\n\n**Acceptance Criteria:**\n- [ ] Pill shape with icon + text\n- [ ] Docker status: Running (green), Stopped (gray), Error (red)\n- [ ] AI status: Active (pulse animation), Idle (gray)\n- [ ] Hover shows tooltip with details\n- [ ] Polls for status updates (or uses query)\n\n**Variants:**\n```tsx\n<StatusPill variant=\"docker\" status=\"running\" />  // ğŸ³ Running\n<StatusPill variant=\"ai\" status=\"active\" />       // âš¡ Active (pulse)\n```\n\n**Tests:** Visual inspection",
      "priority": "low",
      "tags": [
        "status",
        "component"
      ]
    },
    {
      "id": "f3c3461b-a3f3-49cb-b259-bf37b8a71cf5",
      "title": "32 - Create NewTicketDropdown component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Primary \"+\" button opens dropdown",
        "Two options: \"New Ticket\", \"Start from Scratch\"",
        "\"New Ticket\" opens CreateTicketModal",
        "\"Start from Scratch\" opens InceptionModal",
        "Keyboard accessible",
        "Click outside closes dropdown"
      ],
      "references": [
        "src/components/navigation/NewTicketDropdown.tsx"
      ],
      "description": "Create the \"New\" button with dropdown for ticket creation options.\n\n**Files to Create:**\n- `src/components/navigation/NewTicketDropdown.tsx`\n\n**Acceptance Criteria:**\n- [ ] Primary \"+\" button opens dropdown\n- [ ] Two options: \"New Ticket\", \"Start from Scratch\"\n- [ ] \"New Ticket\" opens CreateTicketModal\n- [ ] \"Start from Scratch\" opens InceptionModal\n- [ ] Keyboard accessible\n- [ ] Click outside closes dropdown\n\n**Design:**\n```\n[+ New â–¾]\n  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n  â”‚ ğŸ“ New Ticket      â”‚\n  â”‚ ğŸš€ Start from Scratch â”‚\n  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Tests:** Visual + click handlers",
      "priority": "medium",
      "tags": [
        "navigation",
        "dropdown"
      ]
    },
    {
      "id": "9b12159a-ebbe-4ebf-bd50-f98e6d85bd3a",
      "title": "33 - Create ProjectsPanel component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "320px width panel",
        "Slides out from left, covering sidebar",
        "z-index above sidebar (z-100)",
        "Header with \"Projects\" title and close button",
        "Search input to filter projects",
        "List of ProjectItem components",
        "\"Add Project\" button at bottom",
        "Backdrop overlay (optional)",
        "Panel opens/closes",
        "Projects list renders",
        "Search filters projects"
      ],
      "references": [
        "src/components/navigation/ProjectsPanel.tsx",
        "src/components/navigation/ProjectsPanel.test.tsx"
      ],
      "description": "Create the slide-out projects panel that overlays the sidebar.\n\n**Files to Create:**\n- `src/components/navigation/ProjectsPanel.tsx`\n- `src/components/navigation/ProjectsPanel.test.tsx`\n\n**Acceptance Criteria:**\n- [ ] 320px width panel\n- [ ] Slides out from left, covering sidebar\n- [ ] z-index above sidebar (z-100)\n- [ ] Header with \"Projects\" title and close button\n- [ ] Search input to filter projects\n- [ ] List of ProjectItem components\n- [ ] \"Add Project\" button at bottom\n- [ ] Backdrop overlay (optional)\n\n**Animation:**\n- Slide in from left (transform: translateX)\n- 200ms duration, ease-out\n\n**Tests:**\n- [ ] Panel opens/closes\n- [ ] Projects list renders\n- [ ] Search filters projects",
      "priority": "high",
      "tags": [
        "navigation",
        "panel"
      ]
    },
    {
      "id": "0dd854b1-e9c0-4438-a750-56fb308246ff",
      "title": "34 - Create ProjectItem component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Color indicator circle (project.color)",
        "Project name",
        "Path (truncated, tooltip for full)",
        "Ticket stats: total, in progress, done",
        "AI active indicator (glow if Ralph running)",
        "Click selects project (sets filter)",
        "Double-click opens edit modal",
        "Hover shows actions (edit, delete)"
      ],
      "references": [
        "src/components/navigation/ProjectItem.tsx"
      ],
      "description": "Create individual project item for the projects panel list.\n\n**Files to Create:**\n- `src/components/navigation/ProjectItem.tsx`\n\n**Acceptance Criteria:**\n- [ ] Color indicator circle (project.color)\n- [ ] Project name\n- [ ] Path (truncated, tooltip for full)\n- [ ] Ticket stats: total, in progress, done\n- [ ] AI active indicator (glow if Ralph running)\n- [ ] Click selects project (sets filter)\n- [ ] Double-click opens edit modal\n- [ ] Hover shows actions (edit, delete)\n\n**Layout:**\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ ğŸŸ£ Brain Dump              âš¡      â”‚\nâ”‚    ~/code/brain-dump              â”‚\nâ”‚    12 tickets Â· 3 in progress     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Tests:** Visual inspection",
      "priority": "medium",
      "tags": [
        "navigation",
        "component"
      ]
    },
    {
      "id": "891b7952-dc33-432e-8662-19d1514ddfeb",
      "title": "35 - Create useProjectsPanel hook",
      "passes": true,
      "overview": "",
      "types": [
        {
          "name": "UseProjectsPanelReturn",
          "code": "interface UseProjectsPanelReturn {\n  isOpen: boolean;\n  open: () => void;\n  close: () => void;\n  toggle: () => void;\n}"
        }
      ],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "`useProjectsPanel()` returns `{isOpen, open, close, toggle}`",
        "Click outside panel triggers close",
        "Escape key triggers close",
        "State shared across components (context)",
        "Open/close state works",
        "Click outside closes",
        "Escape closes"
      ],
      "references": [
        "src/lib/navigation-hooks.ts",
        "src/lib/navigation-hooks.test.ts"
      ],
      "description": "Create hook for managing projects panel open/close state.\n\n**Files to Create:**\n- `src/lib/navigation-hooks.ts`\n- `src/lib/navigation-hooks.test.ts`\n\n**Acceptance Criteria:**\n- [ ] `useProjectsPanel()` returns `{isOpen, open, close, toggle}`\n- [ ] Click outside panel triggers close\n- [ ] Escape key triggers close\n- [ ] State shared across components (context)\n\n**Interface:**\n```typescript\ninterface UseProjectsPanelReturn {\n  isOpen: boolean;\n  open: () => void;\n  close: () => void;\n  toggle: () => void;\n}\n\nexport function useProjectsPanel(): UseProjectsPanelReturn;\n```\n\n**Tests:**\n- [ ] Open/close state works\n- [ ] Click outside closes\n- [ ] Escape closes",
      "priority": "medium",
      "tags": [
        "hook",
        "state"
      ]
    },
    {
      "id": "37ab31cc-d937-44e9-a5d0-6281cc101e99",
      "title": "37 - Create Dashboard route",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Route at `/dashboard`",
        "Page title \"Dashboard\"",
        "Grid layout with stat cards",
        "Current Focus section",
        "Up Next queue section",
        "Uses TanStack Query for data"
      ],
      "references": [
        "src/routes/dashboard.tsx"
      ],
      "description": "Create the Dashboard page with stats overview and quick access.\n\n**Files to Create:**\n- `src/routes/dashboard.tsx`\n\n**Acceptance Criteria:**\n- [ ] Route at `/dashboard`\n- [ ] Page title \"Dashboard\"\n- [ ] Grid layout with stat cards\n- [ ] Current Focus section\n- [ ] Up Next queue section\n- [ ] Uses TanStack Query for data\n\n**Layout:**\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Dashboard                                                    â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚\nâ”‚ â”‚ Total  â”‚ â”‚In Prog â”‚ â”‚AI Activeâ”‚ â”‚ Done   â”‚                â”‚\nâ”‚ â”‚  24    â”‚ â”‚   3    â”‚ â”‚   1    â”‚ â”‚  15    â”‚                â”‚\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Current Focus              â”‚ Up Next                        â”‚\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ 1. Ticket A                   â”‚\nâ”‚ â”‚ Active Ticket        â”‚   â”‚ 2. Ticket B                   â”‚\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ 3. Ticket C                   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Tests:** Visual inspection",
      "priority": "high",
      "tags": [
        "route",
        "dashboard"
      ]
    },
    {
      "id": "0ae86982-3c09-43f0-893c-5c8ad8de45d7",
      "title": "38 - Create StatsGrid component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "4 stat cards in a row",
        "Total tickets count",
        "In Progress count",
        "AI Active count (tickets with Ralph session)",
        "Done count",
        "Each card has icon, label, value",
        "Click navigates to filtered board view",
        "Correct counts displayed",
        "Click filters work"
      ],
      "references": [
        "src/components/dashboard/StatsGrid.tsx",
        "src/components/dashboard/StatsGrid.test.tsx"
      ],
      "description": "Create the stats grid showing ticket counts across statuses.\n\n**Files to Create:**\n- `src/components/dashboard/StatsGrid.tsx`\n- `src/components/dashboard/StatsGrid.test.tsx`\n\n**Acceptance Criteria:**\n- [ ] 4 stat cards in a row\n- [ ] Total tickets count\n- [ ] In Progress count\n- [ ] AI Active count (tickets with Ralph session)\n- [ ] Done count\n- [ ] Each card has icon, label, value\n- [ ] Click navigates to filtered board view\n\n**Stat Cards:**\n```tsx\nconst stats = [\n  { icon: Ticket, label: 'Total', value: 24, filter: null },\n  { icon: Clock, label: 'In Progress', value: 3, filter: 'in_progress' },\n  { icon: Zap, label: 'AI Active', value: 1, filter: 'ai_active' },\n  { icon: Check, label: 'Done', value: 15, filter: 'done' },\n];\n```\n\n**Tests:**\n- [ ] Correct counts displayed\n- [ ] Click filters work",
      "priority": "medium",
      "tags": [
        "dashboard",
        "component"
      ]
    },
    {
      "id": "91841fb8-51a3-4d2b-b66d-d494ca730a7b",
      "title": "39 - Create CurrentFocusCard component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Shows ticket currently being worked on (in_progress + AI active)",
        "Displays title, description preview, progress",
        "AI activity indicator (glow if Ralph active)",
        "Click navigates to ticket detail",
        "Empty state: \"No active focus\"",
        "Shows time since started"
      ],
      "references": [
        "src/components/dashboard/CurrentFocusCard.tsx"
      ],
      "description": "Create card showing the currently active/focused ticket.\n\n**Files to Create:**\n- `src/components/dashboard/CurrentFocusCard.tsx`\n\n**Acceptance Criteria:**\n- [ ] Shows ticket currently being worked on (in_progress + AI active)\n- [ ] Displays title, description preview, progress\n- [ ] AI activity indicator (glow if Ralph active)\n- [ ] Click navigates to ticket detail\n- [ ] Empty state: \"No active focus\"\n- [ ] Shows time since started\n\n**Layout:**\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ ğŸ¯ Current Focus                   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Implement dark mode toggle    âš¡   â”‚\nâ”‚ Adding theme switching...          â”‚\nâ”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 3/5 subtasks         â”‚\nâ”‚ Started 2h ago                     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Tests:** Visual inspection",
      "priority": "medium",
      "tags": [
        "dashboard",
        "component"
      ]
    },
    {
      "id": "14d8bb8e-e0b0-4f2d-85af-441311e95561",
      "title": "40 - Create UpNextQueue component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Shows next 5 tickets in priority order",
        "Priority: high â†’ medium â†’ low, then by position",
        "Excludes done/blocked tickets",
        "Shows title, priority badge, project",
        "Click opens ticket",
        "\"Start\" button to begin work",
        "Empty state: \"Queue empty\""
      ],
      "references": [
        "src/components/dashboard/UpNextQueue.tsx"
      ],
      "description": "Create queue showing next tickets to work on in priority order.\n\n**Files to Create:**\n- `src/components/dashboard/UpNextQueue.tsx`\n\n**Acceptance Criteria:**\n- [ ] Shows next 5 tickets in priority order\n- [ ] Priority: high â†’ medium â†’ low, then by position\n- [ ] Excludes done/blocked tickets\n- [ ] Shows title, priority badge, project\n- [ ] Click opens ticket\n- [ ] \"Start\" button to begin work\n- [ ] Empty state: \"Queue empty\"\n\n**Layout:**\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ ğŸ“‹ Up Next                         â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 1. ğŸ”´ Add login validation  [Start]â”‚\nâ”‚ 2. ğŸŸ  Update API docs              â”‚\nâ”‚ 3. ğŸŸ  Fix navbar styling           â”‚\nâ”‚ 4. âšª Refactor utils               â”‚\nâ”‚ 5. âšª Add unit tests               â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Tests:** Visual + verify priority order",
      "priority": "medium",
      "tags": [
        "dashboard",
        "component"
      ]
    }
  ],
  "projectContext": {
    "techStack": [
      "Framework: TanStack Start (React 19 + Vite + Nitro)",
      "Database: SQLite with better-sqlite3, Drizzle ORM",
      "Styling: Tailwind CSS v4",
      "State: TanStack Query for server state",
      "Drag & Drop: @dnd-kit"
    ],
    "dosDonts": [
      {
        "category": "Database Queries",
        "dos": [
          "Use Drizzle ORM: `db.select().from(tickets)`",
          "Use typed schema imports: `import { tickets } from \"../lib/schema\"`",
          "Use `eq()`, `and()`, `sql` from drizzle-orm for conditions",
          "Use transactions for multi-table operations: `db.transaction(() => {...})`",
          "Use `.get()` for single row, `.all()` for multiple"
        ],
        "donts": [
          "Raw SQL strings: `db.run(\"SELECT * FROM tickets\")`",
          "String-based table names",
          "String concatenation for WHERE clauses",
          "Multiple independent queries that should be atomic",
          "Assume query returns what you expect without checking"
        ]
      },
      {
        "category": "React & TanStack Query",
        "dos": [
          "Use `useQuery` with `queryKeys` for data fetching",
          "Use `useMutation` with `onSuccess` for state changes",
          "Invalidate queries after mutations: `queryClient.invalidateQueries({ queryKey: queryKeys.tickets })`",
          "Use centralized `queryKeys` object from `src/lib/hooks.ts`",
          "Create custom hooks in `src/lib/hooks.ts` for reusable query logic"
        ],
        "donts": [
          "`useState` + `useEffect` for fetched data",
          "Direct API calls without proper cache invalidation",
          "Manual cache manipulation or refetch after every change",
          "Hardcoded query key strings throughout components",
          "Duplicate query setup in multiple components"
        ]
      },
      {
        "category": "Server Functions",
        "dos": [
          "Use `createServerFn({ method: \"GET\" })` for reads, `\"POST\"` for writes",
          "Use `.inputValidator()` for type-safe input handling",
          "Return typed data directly: `return db.select().from(tickets).all()`",
          "Use `ensureExists()` for required lookups: `ensureExists(project, \"Project\")`",
          "Import from `@tanstack/react-start` (not `@tanstack/react-start/server`)"
        ],
        "donts": [
          "Mix GET/POST inconsistently",
          "Access raw input without validation",
          "Wrap in unnecessary response objects",
          "Return null and let caller handle missing data",
          "Wrong import path"
        ]
      },
      {
        "category": "MCP Tool Implementation",
        "dos": [
          "Use Zod schemas for input validation: `{ ticketId: z.string() }`",
          "Return structured `{ content: [{ type: \"text\", text: ... }] }` format",
          "Set `isError: true` for error responses",
          "Use `log.info()` / `log.error()` from `../lib/logging.js`",
          "Include helpful error messages: `\"Project not found. Use list_projects to see available.\"`"
        ],
        "donts": [
          "Trust input without validation",
          "Return plain strings",
          "Return error text without the error flag",
          "`console.log` in MCP server code",
          "Generic \"Not found\" errors"
        ]
      },
      {
        "category": "Testing Patterns (Kent C. Dodds)",
        "dos": [
          "Test user behavior: what users see, click, and experience",
          "Integration tests for workflows: test components together",
          "Real database fixtures with actual schema",
          "Tests that fail when user-facing behavior breaks",
          "Ask: \"Does this test catch bugs users would encounter?\""
        ],
        "donts": [
          "Test implementation details, internal state, or private methods",
          "Unit tests for every function",
          "Excessive mocking of internals",
          "Tests that break on refactoring internals",
          "Chase 100% code coverage as a goal"
        ]
      }
    ],
    "verificationSteps": [
      "Run `pnpm type-check` - must pass with no errors",
      "Run `pnpm lint` - must pass with no errors",
      "Run `pnpm test` - all tests must pass",
      "Added tests for new functionality (following Kent C. Dodds testing philosophy)",
      "Used typed error classes (not generic `Error`)",
      "Used Drizzle ORM (not raw SQL) - see DO/DON'T table above",
      "Followed existing patterns from DO/DON'T tables",
      "No hardcoded values that should be configurable",
      "Existing tests still pass",
      "No regressions in related functionality",
      "Updated tests if behavior changed",
      "Did not break backward compatibility (unless explicitly requested)",
      "Manually verified in browser at `localhost:4242`",
      "Checked responsive layout",
      "Verified TanStack Query invalidates and updates correctly",
      "Accessibility: keyboard navigation works, proper ARIA labels",
      "Migration file created via `pnpm db:generate`",
      "Migration tested with `pnpm db:migrate`",
      "Backup tested if schema changed (use `pnpm brain-dump backup` then test restore)",
      "Updated `src/lib/schema.ts` with proper types and constraints",
      "Tested tool via Claude Code integration",
      "Verified error responses are informative (see DO/DON'T table)",
      "Updated tool documentation if interface changed",
      "Added Zod schema for input validation",
      "All acceptance criteria from ticket met",
      "Work summary added via `add_ticket_comment` (for Ralph sessions)",
      "Session completed with appropriate outcome (for Ralph sessions)",
      "Committed with proper message format: `feat(<ticket-id>): <description>`"
    ]
  },
  "generatedAt": "2026-01-20T12:13:39.466Z",
  "epicTitle": "UI v2 Sprint 2: Navigation & Layout",
  "epicDescription": "Build the app shell with collapsible sidebar, project switcher, quick actions bar, keyboard navigation system, and responsive layout breakpoints."
}

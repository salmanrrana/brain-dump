{
  "projectName": "Brain Dump",
  "projectPath": "/Users/salman.rana/code/brain-dump",
  "testingRequirements": [
    "Tests must validate user-facing behavior, not implementation details",
    "Focus on what users actually do - integration tests over unit tests",
    "Don't mock excessively - test real behavior where possible",
    "Coverage metrics are meaningless - user flow coverage is everything"
  ],
  "userStories": [
    {
      "id": "d0bca8ec-40ee-478b-9689-af6ef08bc138",
      "title": "41 - Create KanbanBoard component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Horizontal scroll container for columns",
        "7 columns for each status",
        "Responsive: scrolls on smaller screens",
        "Fetches tickets via TanStack Query",
        "Groups tickets by status",
        "Loading skeleton while fetching"
      ],
      "references": [
        "src/components/board/KanbanBoard.tsx"
      ],
      "description": "Create the main kanban board container with horizontal scrolling columns.\n\n**Files to Create:**\n- `src/components/board/KanbanBoard.tsx`\n\n**Acceptance Criteria:**\n- [ ] Horizontal scroll container for columns\n- [ ] 7 columns for each status\n- [ ] Responsive: scrolls on smaller screens\n- [ ] Fetches tickets via TanStack Query\n- [ ] Groups tickets by status\n- [ ] Loading skeleton while fetching\n\n**Columns (in order):**\n```tsx\nconst columns = [\n  'backlog', 'ready', 'in_progress', \n  'review', 'ai_review', 'human_review', 'done'\n];\n```\n\n**Tests:** Visual inspection",
      "priority": "high",
      "tags": [
        "board",
        "component"
      ]
    },
    {
      "id": "7a95b0e9-0265-4e8a-a113-c7228fbe2252",
      "title": "42 - Create KanbanColumn component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Column header with status label",
        "Ticket count badge",
        "Drop zone for drag-and-drop",
        "Scrollable ticket list",
        "Empty state message",
        "Status-specific accent color on header",
        "Min-width: 280px, max-width: 320px"
      ],
      "references": [
        "src/components/board/KanbanColumn.tsx"
      ],
      "description": "Create individual kanban column with header, count, and drop zone.\n\n**Files to Create:**\n- `src/components/board/KanbanColumn.tsx`\n\n**Acceptance Criteria:**\n- [ ] Column header with status label\n- [ ] Ticket count badge\n- [ ] Drop zone for drag-and-drop\n- [ ] Scrollable ticket list\n- [ ] Empty state message\n- [ ] Status-specific accent color on header\n- [ ] Min-width: 280px, max-width: 320px\n\n**Layout:**\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ In Progress    (3)  ‚îÇ  <- Header with count\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ\n‚îÇ ‚îÇ Ticket Card 1   ‚îÇ ‚îÇ\n‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ\n‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ\n‚îÇ ‚îÇ Ticket Card 2   ‚îÇ ‚îÇ\n‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ\n‚îÇ                     ‚îÇ  <- Drop zone\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n**Tests:** Visual inspection",
      "priority": "high",
      "tags": [
        "board",
        "component"
      ]
    },
    {
      "id": "50e5e604-de2e-4108-93fc-7877ed0d97f1",
      "title": "43 - Create Board route as default",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Route at `/` shows kanban board",
        "Integrates KanbanBoard component",
        "Header with board title",
        "Filter controls (BoardHeader)",
        "Uses existing ticket query hooks",
        "Navigate to `/` shows board",
        "Board has 7 columns",
        "Tickets render in correct columns"
      ],
      "references": [
        "src/routes/index.tsx"
      ],
      "description": "Set up the board route as the default/index route for the app.\n\n**Files to Create:**\n- `src/routes/index.tsx`\n\n**Acceptance Criteria:**\n- [ ] Route at `/` shows kanban board\n- [ ] Integrates KanbanBoard component\n- [ ] Header with board title\n- [ ] Filter controls (BoardHeader)\n- [ ] Uses existing ticket query hooks\n\n**E2E Tests:**\n- [ ] Navigate to `/` shows board\n- [ ] Board has 7 columns\n- [ ] Tickets render in correct columns",
      "priority": "high",
      "tags": [
        "board",
        "routing"
      ]
    },
    {
      "id": "04631a36-8202-492a-a68c-4b27d8c0ae75",
      "title": "44 - Create TicketCard component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Priority indicator on left border (red=high, orange=medium, gray=low)",
        "Ticket title (truncate at 2 lines)",
        "Tags row (max 3 visible)",
        "Git info (branch, PR badge)",
        "Click opens ticket detail/modal",
        "Hover shows subtle elevation",
        "Card background uses `--bg-card`",
        "Priority border correct",
        "Title truncates",
        "Click handler fires"
      ],
      "references": [
        "src/components/board/TicketCard.tsx",
        "src/components/board/TicketCard.test.tsx"
      ],
      "description": "Create the ticket card component for the kanban board with new design.\n\n**Files to Create:**\n- `src/components/board/TicketCard.tsx`\n- `src/components/board/TicketCard.test.tsx`\n\n**Acceptance Criteria:**\n- [ ] Priority indicator on left border (red=high, orange=medium, gray=low)\n- [ ] Ticket title (truncate at 2 lines)\n- [ ] Tags row (max 3 visible)\n- [ ] Git info (branch, PR badge)\n- [ ] Click opens ticket detail/modal\n- [ ] Hover shows subtle elevation\n- [ ] Card background uses `--bg-card`\n\n**Layout:**\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ‚ñå Implement user auth          ‚îÇ  <- Red border = high priority\n‚îÇ  [auth] [backend]             ‚îÇ  <- Tags\n‚îÇ  üåø feature/auth  üîó #42      ‚îÇ  <- Branch + PR\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n**Tests:**\n- [ ] Priority border correct\n- [ ] Title truncates\n- [ ] Click handler fires",
      "priority": "high",
      "tags": [
        "board",
        "component"
      ]
    },
    {
      "id": "fa7fe824-cc8f-4c80-a0a6-62a8001d3ddf",
      "title": "45 - Add AI-active glow state to TicketCard",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Detect AI-active state (ticket has active Ralph session)",
        "Apply glow effect using accent color",
        "Subtle pulse animation (opacity oscillation)",
        "Glow visible but not overwhelming",
        "Performance: CSS animation, not JS"
      ],
      "references": [
        "src/components/board/TicketCard.tsx"
      ],
      "description": "Add pulsing glow effect to ticket cards when AI (Ralph) is actively working on them.\n\n**Files to Modify:**\n- `src/components/board/TicketCard.tsx`\n\n**Acceptance Criteria:**\n- [ ] Detect AI-active state (ticket has active Ralph session)\n- [ ] Apply glow effect using accent color\n- [ ] Subtle pulse animation (opacity oscillation)\n- [ ] Glow visible but not overwhelming\n- [ ] Performance: CSS animation, not JS\n\n**CSS Animation:**\n```css\n@keyframes ai-pulse {\n  0%, 100% { box-shadow: 0 0 8px var(--accent-primary); }\n  50% { box-shadow: 0 0 16px var(--accent-primary); }\n}\n\n.ai-active {\n  animation: ai-pulse 2s ease-in-out infinite;\n}\n```\n\n**Tests:** Visual inspection with mock AI-active ticket",
      "priority": "medium",
      "tags": [
        "board",
        "animation"
      ]
    },
    {
      "id": "88518d32-10d0-4b3b-847d-7730665ecf10",
      "title": "46 - Create GitInfo component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Branch badge with branch icon",
        "PR badge with number and status color",
        "PR status colors: open=green, draft=gray, merged=purple, closed=red",
        "Truncate long branch names",
        "Tooltip shows full branch name",
        "Hide if no git info"
      ],
      "references": [
        "src/components/board/GitInfo.tsx"
      ],
      "description": "Create component showing git branch and PR status on ticket cards.\n\n**Files to Create:**\n- `src/components/board/GitInfo.tsx`\n\n**Acceptance Criteria:**\n- [ ] Branch badge with branch icon\n- [ ] PR badge with number and status color\n- [ ] PR status colors: open=green, draft=gray, merged=purple, closed=red\n- [ ] Truncate long branch names\n- [ ] Tooltip shows full branch name\n- [ ] Hide if no git info\n\n**Layout:**\n```\nüåø feature/ui-v2  üîó #42 ‚óè  <- Branch + PR number + status dot\n```\n\n**Tests:** Visual inspection",
      "priority": "medium",
      "tags": [
        "board",
        "component"
      ]
    },
    {
      "id": "49b9394b-2767-4aba-9a4e-3e53029357db",
      "title": "47 - Create TicketTags component",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Show up to 3 tag pills",
        "\"+N more\" indicator if more than 3",
        "Hover on \"+N\" shows tooltip with remaining tags",
        "Tag colors from predefined palette",
        "Compact size for card use",
        "Hide if no tags"
      ],
      "references": [
        "src/components/board/TicketTags.tsx"
      ],
      "description": "Create component showing ticket tags with overflow handling.\n\n**Files to Create:**\n- `src/components/board/TicketTags.tsx`\n\n**Acceptance Criteria:**\n- [ ] Show up to 3 tag pills\n- [ ] \"+N more\" indicator if more than 3\n- [ ] Hover on \"+N\" shows tooltip with remaining tags\n- [ ] Tag colors from predefined palette\n- [ ] Compact size for card use\n- [ ] Hide if no tags\n\n**Layout:**\n```\n[auth] [backend] [api] +2 more\n```\n\n**Tests:** Visual inspection",
      "priority": "low",
      "tags": [
        "board",
        "component"
      ]
    },
    {
      "id": "d31deebb-1148-4314-9004-e95d2281064e",
      "title": "48 - Set up DndProvider with @dnd-kit",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Wrap KanbanBoard with DndContext",
        "Configure sensors (pointer, keyboard)",
        "Set up collision detection",
        "Provide drag start/end/over handlers",
        "Accessibility announcements"
      ],
      "references": [
        "src/components/board/DndProvider.tsx"
      ],
      "description": "Set up the @dnd-kit context provider for drag-and-drop functionality.\n\n**Files to Create:**\n- `src/components/board/DndProvider.tsx`\n\n**Acceptance Criteria:**\n- [ ] Wrap KanbanBoard with DndContext\n- [ ] Configure sensors (pointer, keyboard)\n- [ ] Set up collision detection\n- [ ] Provide drag start/end/over handlers\n- [ ] Accessibility announcements\n\n**Implementation:**\n```tsx\nimport { \n  DndContext, \n  PointerSensor, \n  KeyboardSensor,\n  useSensor, \n  useSensors,\n  closestCorners\n} from '@dnd-kit/core';\n\nexport function DndProvider({ children, onDragEnd }) {\n  const sensors = useSensors(\n    useSensor(PointerSensor),\n    useSensor(KeyboardSensor)\n  );\n  \n  return (\n    <DndContext \n      sensors={sensors} \n      collisionDetection={closestCorners}\n      onDragEnd={onDragEnd}\n    >\n      {children}\n    </DndContext>\n  );\n}\n```\n\n**Tests:** Visual - drag initiates",
      "priority": "high",
      "tags": [
        "board",
        "dnd"
      ]
    },
    {
      "id": "c0cf7a63-807e-41f5-81e6-1c511ba6640b",
      "title": "49 - Create SortableTicketCard wrapper",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Wraps TicketCard with useSortable",
        "Apply drag styles (opacity, transform)",
        "Handle drag handle (entire card is draggable)",
        "Keyboard accessible dragging",
        "Visual feedback during drag"
      ],
      "references": [
        "src/components/board/SortableTicketCard.tsx"
      ],
      "description": "Create draggable wrapper for ticket cards using @dnd-kit/sortable.\n\n**Files to Create:**\n- `src/components/board/SortableTicketCard.tsx`\n\n**Acceptance Criteria:**\n- [ ] Wraps TicketCard with useSortable\n- [ ] Apply drag styles (opacity, transform)\n- [ ] Handle drag handle (entire card is draggable)\n- [ ] Keyboard accessible dragging\n- [ ] Visual feedback during drag\n\n**Implementation:**\n```tsx\nimport { useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\n\nexport function SortableTicketCard({ ticket }) {\n  const { attributes, listeners, setNodeRef, transform, transition, isDragging } = \n    useSortable({ id: ticket.id });\n    \n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.5 : 1,\n  };\n  \n  return (\n    <div ref={setNodeRef} style={style} {...attributes} {...listeners}>\n      <TicketCard ticket={ticket} />\n    </div>\n  );\n}\n```\n\n**Tests (E2E):** Drag ticket card",
      "priority": "high",
      "tags": [
        "board",
        "dnd"
      ]
    },
    {
      "id": "4ee27d39-8c2a-47c9-882e-01ac74ef7cac",
      "title": "50 - Create DragOverlay for card preview",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "DragOverlay shows card preview while dragging",
        "Preview follows cursor smoothly",
        "Shows same card design as original",
        "Slightly elevated/scaled for depth",
        "Cursor changes to grabbing"
      ],
      "references": [
        "src/components/board/KanbanBoard.tsx"
      ],
      "description": "Create drag overlay showing card preview while dragging.\n\n**Files to Modify:**\n- `src/components/board/KanbanBoard.tsx`\n\n**Acceptance Criteria:**\n- [ ] DragOverlay shows card preview while dragging\n- [ ] Preview follows cursor smoothly\n- [ ] Shows same card design as original\n- [ ] Slightly elevated/scaled for depth\n- [ ] Cursor changes to grabbing\n\n**Implementation:**\n```tsx\nimport { DragOverlay } from '@dnd-kit/core';\n\n// In KanbanBoard\n<DragOverlay>\n  {activeTicket ? (\n    <TicketCard ticket={activeTicket} isOverlay />\n  ) : null}\n</DragOverlay>\n```\n\n**Tests:** Visual - card follows cursor during drag",
      "priority": "medium",
      "tags": [
        "board",
        "dnd"
      ]
    },
    {
      "id": "1ad45ec8-3046-45a2-8d66-2ac4fd643879",
      "title": "51 - Implement status update on drop",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Detect drop into different column",
        "Call existing `updateTicket` mutation",
        "Update status to match target column",
        "Optimistic update (instant UI)",
        "Rollback on error",
        "Invalidate tickets query",
        "Show toast on success/error",
        "Drag ticket to new column",
        "Status updates in database",
        "Card stays in new column after refresh"
      ],
      "references": [
        "src/components/board/KanbanBoard.tsx"
      ],
      "description": "Update ticket status when dropped in a new column.\n\n**Files to Modify:**\n- `src/components/board/KanbanBoard.tsx`\n\n**Acceptance Criteria:**\n- [ ] Detect drop into different column\n- [ ] Call existing `updateTicket` mutation\n- [ ] Update status to match target column\n- [ ] Optimistic update (instant UI)\n- [ ] Rollback on error\n- [ ] Invalidate tickets query\n- [ ] Show toast on success/error\n\n**Implementation:**\n```tsx\nconst handleDragEnd = async (event) => {\n  const { active, over } = event;\n  if (!over) return;\n  \n  const ticketId = active.id;\n  const newStatus = over.data.current?.status;\n  \n  if (newStatus && newStatus !== activeTicket.status) {\n    await updateTicket({ id: ticketId, status: newStatus });\n  }\n};\n```\n\n**E2E Tests:**\n- [ ] Drag ticket to new column\n- [ ] Status updates in database\n- [ ] Card stays in new column after refresh",
      "priority": "high",
      "tags": [
        "board",
        "dnd",
        "mutation"
      ]
    },
    {
      "id": "712c2f95-56dc-4729-90ac-2f53eda2d4d4",
      "title": "52 - Create BoardHeader with filter chips",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Project dropdown filter",
        "Epic dropdown filter",
        "Tag multi-select filter",
        "Clear all filters button",
        "Active filter count indicator",
        "Filters sync with URL params"
      ],
      "references": [
        "src/components/board/BoardHeader.tsx"
      ],
      "description": "Create board header with project, epic, and tag filter chips.\n\n**Files to Create:**\n- `src/components/board/BoardHeader.tsx`\n\n**Acceptance Criteria:**\n- [ ] Project dropdown filter\n- [ ] Epic dropdown filter\n- [ ] Tag multi-select filter\n- [ ] Clear all filters button\n- [ ] Active filter count indicator\n- [ ] Filters sync with URL params\n\n**Layout:**\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Board    [Project ‚ñæ] [Epic ‚ñæ] [Tags ‚ñæ]    Clear (3 active) ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n**Tests:** Visual inspection",
      "priority": "medium",
      "tags": [
        "board",
        "filter"
      ]
    },
    {
      "id": "1270fb23-1d04-4b1b-85d6-e00f451fff8b",
      "title": "53 - Create useFilters hook with URL sync",
      "passes": true,
      "overview": "",
      "types": [
        {
          "name": "Filters",
          "code": "interface Filters {\n  projectId: string | null;\n  epicId: string | null;\n  tags: string[];\n}"
        },
        {
          "name": "UseFiltersReturn",
          "code": "interface UseFiltersReturn {\n  filters: Filters;\n  setFilter: (key: keyof Filters, value: any) => void;\n  clearFilters: () => void;\n  hasActiveFilters: boolean;\n  activeFilterCount: number;\n}"
        }
      ],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Filter state: projectId, epicId, tags[]",
        "URL params sync (shareable filtered views)",
        "`setFilter(key, value)` to update single filter",
        "`clearFilters()` to reset all",
        "Persists across navigation",
        "Initial state from URL params",
        "URL updates when filter changes",
        "Initial state from URL"
      ],
      "references": [
        "src/lib/filter-hooks.ts",
        "src/lib/filter-hooks.test.ts"
      ],
      "description": "Create hook for managing board filters with URL synchronization.\n\n**Files to Create:**\n- `src/lib/filter-hooks.ts`\n- `src/lib/filter-hooks.test.ts`\n\n**Acceptance Criteria:**\n- [ ] Filter state: projectId, epicId, tags[]\n- [ ] URL params sync (shareable filtered views)\n- [ ] `setFilter(key, value)` to update single filter\n- [ ] `clearFilters()` to reset all\n- [ ] Persists across navigation\n- [ ] Initial state from URL params\n\n**Interface:**\n```typescript\ninterface Filters {\n  projectId: string | null;\n  epicId: string | null;\n  tags: string[];\n}\n\ninterface UseFiltersReturn {\n  filters: Filters;\n  setFilter: (key: keyof Filters, value: any) => void;\n  clearFilters: () => void;\n  hasActiveFilters: boolean;\n  activeFilterCount: number;\n}\n```\n\n**Tests:**\n- [ ] URL updates when filter changes\n- [ ] Initial state from URL",
      "priority": "medium",
      "tags": [
        "hook",
        "filter"
      ]
    },
    {
      "id": "7f7a17d5-3ffc-4d9d-b15f-c88d03dabe5d",
      "title": "54 - Integrate filters with board query",
      "passes": true,
      "overview": "",
      "types": [],
      "designDecisions": [],
      "implementationGuide": [],
      "acceptanceCriteria": [
        "Pass filters to tickets query",
        "Server filters tickets by project/epic/tags",
        "Client shows filtered tickets only",
        "Empty state when no tickets match",
        "Filter change triggers refetch",
        "Loading state during filter change",
        "Select project filter",
        "Board shows only that project's tickets",
        "Clear filter shows all"
      ],
      "references": [
        "src/components/board/KanbanBoard.tsx"
      ],
      "description": "Apply filters to the tickets query for filtered board views.\n\n**Files to Modify:**\n- `src/components/board/KanbanBoard.tsx`\n\n**Acceptance Criteria:**\n- [ ] Pass filters to tickets query\n- [ ] Server filters tickets by project/epic/tags\n- [ ] Client shows filtered tickets only\n- [ ] Empty state when no tickets match\n- [ ] Filter change triggers refetch\n- [ ] Loading state during filter change\n\n**Implementation:**\n```tsx\nconst { filters } = useFilters();\n\nconst { data: tickets } = useQuery({\n  queryKey: ['tickets', filters],\n  queryFn: () => getTickets(filters),\n});\n```\n\n**E2E Tests:**\n- [ ] Select project filter\n- [ ] Board shows only that project's tickets\n- [ ] Clear filter shows all",
      "priority": "medium",
      "tags": [
        "board",
        "filter",
        "query"
      ]
    }
  ],
  "projectContext": {
    "techStack": [
      "Framework: TanStack Start (React 19 + Vite + Nitro)",
      "Database: SQLite with better-sqlite3, Drizzle ORM",
      "Styling: Tailwind CSS v4",
      "State: TanStack Query for server state",
      "Drag & Drop: @dnd-kit"
    ],
    "dosDonts": [
      {
        "category": "Database Queries",
        "dos": [
          "Use Drizzle ORM: `db.select().from(tickets)`",
          "Use typed schema imports: `import { tickets } from \"../lib/schema\"`",
          "Use `eq()`, `and()`, `sql` from drizzle-orm for conditions",
          "Use transactions for multi-table operations: `db.transaction(() => {...})`",
          "Use `.get()` for single row, `.all()` for multiple"
        ],
        "donts": [
          "Raw SQL strings: `db.run(\"SELECT * FROM tickets\")`",
          "String-based table names",
          "String concatenation for WHERE clauses",
          "Multiple independent queries that should be atomic",
          "Assume query returns what you expect without checking"
        ]
      },
      {
        "category": "React & TanStack Query",
        "dos": [
          "Use `useQuery` with `queryKeys` for data fetching",
          "Use `useMutation` with `onSuccess` for state changes",
          "Invalidate queries after mutations: `queryClient.invalidateQueries({ queryKey: queryKeys.tickets })`",
          "Use centralized `queryKeys` object from `src/lib/hooks.ts`",
          "Create custom hooks in `src/lib/hooks.ts` for reusable query logic"
        ],
        "donts": [
          "`useState` + `useEffect` for fetched data",
          "Direct API calls without proper cache invalidation",
          "Manual cache manipulation or refetch after every change",
          "Hardcoded query key strings throughout components",
          "Duplicate query setup in multiple components"
        ]
      },
      {
        "category": "Server Functions",
        "dos": [
          "Use `createServerFn({ method: \"GET\" })` for reads, `\"POST\"` for writes",
          "Use `.inputValidator()` for type-safe input handling",
          "Return typed data directly: `return db.select().from(tickets).all()`",
          "Use `ensureExists()` for required lookups: `ensureExists(project, \"Project\")`",
          "Import from `@tanstack/react-start` (not `@tanstack/react-start/server`)"
        ],
        "donts": [
          "Mix GET/POST inconsistently",
          "Access raw input without validation",
          "Wrap in unnecessary response objects",
          "Return null and let caller handle missing data",
          "Wrong import path"
        ]
      },
      {
        "category": "MCP Tool Implementation",
        "dos": [
          "Use Zod schemas for input validation: `{ ticketId: z.string() }`",
          "Return structured `{ content: [{ type: \"text\", text: ... }] }` format",
          "Set `isError: true` for error responses",
          "Use `log.info()` / `log.error()` from `../lib/logging.js`",
          "Include helpful error messages: `\"Project not found. Use list_projects to see available.\"`"
        ],
        "donts": [
          "Trust input without validation",
          "Return plain strings",
          "Return error text without the error flag",
          "`console.log` in MCP server code",
          "Generic \"Not found\" errors"
        ]
      },
      {
        "category": "Testing Patterns (Kent C. Dodds)",
        "dos": [
          "Test user behavior: what users see, click, and experience",
          "Integration tests for workflows: test components together",
          "Real database fixtures with actual schema",
          "Tests that fail when user-facing behavior breaks",
          "Ask: \"Does this test catch bugs users would encounter?\""
        ],
        "donts": [
          "Test implementation details, internal state, or private methods",
          "Unit tests for every function",
          "Excessive mocking of internals",
          "Tests that break on refactoring internals",
          "Chase 100% code coverage as a goal"
        ]
      }
    ],
    "verificationSteps": [
      "Run `pnpm type-check` - must pass with no errors",
      "Run `pnpm lint` - must pass with no errors",
      "Run `pnpm test` - all tests must pass",
      "Added tests for new functionality (ONLY tests that verify real user behavior - see Testing Philosophy above)",
      "Used typed error classes (not generic `Error`)",
      "Used Drizzle ORM (not raw SQL) - see DO/DON'T table above",
      "Followed existing patterns from DO/DON'T tables",
      "No hardcoded values that should be configurable",
      "Existing tests still pass",
      "No regressions in related functionality",
      "Updated tests if behavior changed",
      "Did not break backward compatibility (unless explicitly requested)",
      "Manually verified in browser at `localhost:4242`",
      "Checked responsive layout",
      "Verified TanStack Query invalidates and updates correctly",
      "Accessibility: keyboard navigation works, proper ARIA labels",
      "Migration file created via `pnpm db:generate`",
      "Migration tested with `pnpm db:migrate`",
      "Backup tested if schema changed (use `pnpm brain-dump backup` then test restore)",
      "Updated `src/lib/schema.ts` with proper types and constraints",
      "Tested tool via Claude Code integration",
      "Verified error responses are informative (see DO/DON'T table)",
      "Updated tool documentation if interface changed",
      "Added Zod schema for input validation",
      "All acceptance criteria from ticket met",
      "Work summary added via `add_ticket_comment` (for Ralph sessions)",
      "Session completed with appropriate outcome (for Ralph sessions)",
      "Committed with proper message format: `feat(<ticket-id>): <description>`"
    ]
  },
  "generatedAt": "2026-01-20T21:36:33.012Z",
  "epicTitle": "UI v2 Sprint 3: Kanban Board",
  "epicDescription": "Implement the core kanban board with drag-and-drop columns, ticket cards with visual hierarchy, column headers with counts, and smooth animations."
}
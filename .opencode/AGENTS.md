# Brain Dump - OpenCode Integration

## Canonical Prompt Source

Ralph's workflow instructions are generated by `getRalphPrompt()` in `src/api/ralph.ts`.
That function is the SINGLE SOURCE OF TRUTH for all launch paths (terminal, Docker, OpenCode, VS Code).
Do NOT duplicate workflow instructions here — update `getRalphPrompt()` instead.

## CRITICAL: MCP Tools Are Mandatory

All workflow tracking happens through Brain Dump MCP tools. These must be LITERALLY
invoked — they are not conceptual steps. If you use local alternatives (git commands,
local review skills, text descriptions), no record of your work appears in Brain Dump tickets.

## Essential MCP Tools

1. `workflow "start-work"` — creates branch, starts tracking (NOT `git checkout -b`)
2. `session "create"` — creates session for state tracking
3. `workflow "complete-work"` — moves to review phase
4. `review "submit-finding"` — logs review issues (NOT local `/review` skills)
5. `review "check-complete"` — verifies review done
6. `review "generate-demo"` — creates human test steps (NOT text descriptions)
7. `session "complete"` — completes the session

## Quality Gates

Run before completing: `pnpm type-check && pnpm lint && pnpm test`

## Rules

- NEVER skip MCP tool calls in the workflow
- NEVER set ticket to "done" (only humans approve via `review "submit-feedback"`)
- STOP after generating demo script
- Always commit with format: `feat(<ticket-id>): <description>`

## Troubleshooting

For common errors like "STATE ENFORCEMENT" blocks or "Cannot proceed - open critical findings",
see `skills/brain-dump-workflow/reference/troubleshooting.md`.

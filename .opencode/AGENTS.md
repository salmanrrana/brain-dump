# Brain Dump - OpenCode Integration

## Canonical Prompt Source

Ralph's workflow instructions are generated by `getRalphPrompt()` in `src/api/ralph.ts`.
That function is the SINGLE SOURCE OF TRUTH for all launch paths (terminal, Docker, OpenCode, VS Code).
Do NOT duplicate workflow instructions here — update `getRalphPrompt()` instead.

## CRITICAL: MCP Tools Are Mandatory

All workflow tracking happens through Brain Dump MCP tools. These must be LITERALLY
invoked — they are not conceptual steps. If you use local alternatives (git commands,
local review skills, text descriptions), no record of your work appears in Brain Dump tickets.

## Essential MCP Tools

1. `start_ticket_work` — creates branch, starts tracking (NOT `git checkout -b`)
2. `create_ralph_session` — creates session for state tracking
3. `complete_ticket_work` — moves to review phase
4. `submit_review_finding` — logs review issues (NOT local `/review` skills)
5. `check_review_complete` — verifies review done
6. `generate_demo_script` — creates human test steps (NOT text descriptions)
7. `complete_ralph_session` — completes the session

## Quality Gates

Run before completing: `pnpm type-check && pnpm lint && pnpm test`

## Rules

- NEVER skip MCP tool calls in the workflow
- NEVER set ticket to "done" (only humans approve via `submit_demo_feedback`)
- STOP after generating demo script
- Always commit with format: `feat(<ticket-id>): <description>`

## Troubleshooting

For common errors like "STATE ENFORCEMENT" blocks or "Cannot proceed - open critical findings",
see `skills/brain-dump-workflow/reference/troubleshooting.md`.
